<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:o="http://omnifaces.org/ui"
                xmlns:of="http://omnifaces.org/functions">
    <link rel="stylesheet" href="../resources/css/changepassword.css"/>

    <h:body>
        <f:view locale="#{languageController.language}">
            <div id="container">
                <div id="header">
                    <ui:include src="../template/header.xhtml"/>
                </div>
                <div id="content">
                    <p:outputPanel id="outputPanel">
                        <div>
                            <h:form>
                                <p:messages id="messages"  autoUpdate="true" closable="true" showIcon="false" style="font-size:13px;" />
                            </h:form>
                        </div>
                        <div class="box">
                            <h3>#{msg.changepassword}</h3>
                            <h:form>
                                <div data-balloon="&#9787; #{msg.maxCharacter25} &#10;&#9787; #{msg.specialCharacter} &#10;&#9787; #{msg.minCharacter8}" data-balloon-break="data-balloon-break" data-balloon-pos="down" class="inputBox">
                                    <h:outputLabel rendered="#{param['token'] eq null or param['token'] eq ''}" for="pwd1" value="#{msg.oldpassword}"/>
                                    <h:inputSecret rendered="#{param['token'] eq null or param['token'] eq ''}" maxlength="25" value="#{changePassword.oldPassword}" requiredMessage="#{msg.oldpasswordrequired}" styleClass="text-input" required="true">
                                        <o:validator validatorId="javax.faces.RegularExpression" pattern="^[a-zA-Z0-9,ç,Ç,ğ,Ğ,ı,İ,ö,Ö,ş,Ş,ü,Ü]+$" message="#{msg.oldpassword} #{msg.RegexValidator}"/>
                                        <o:validator validatorId="javax.faces.Length" minimum="8" maximum="25" message="#{msg.checknewpassword} #{msg.LongRange}" />
                                    </h:inputSecret>
                                </div>
                                <div data-balloon="&#9787; #{msg.maxCharacter25} &#10;&#9787; #{msg.specialCharacter} &#10;&#9787; #{msg.minCharacter8}" data-balloon-break="data-balloon-break" data-balloon-pos="down" class="inputBox">
                                    <h:outputLabel value="#{msg.newpassword}" />
                                    <h:inputSecret maxlength="25" value="#{changePassword.newPassword}" styleClass="text-input" requiredMessage="#{msg.newpasswordrequired}" required="true">
                                        <o:validator validatorId="javax.faces.RegularExpression" pattern="^[a-zA-Z0-9,ç,Ç,ğ,Ğ,ı,İ,ö,Ö,ş,Ş,ü,Ü]+$" message="#{msg.newpassword} #{msg.RegexValidator}"/>
                                        <o:validator validatorId="javax.faces.Length" minimum="8" maximum="25" message="#{msg.newpassword} #{msg.LongRange}" />
                                    </h:inputSecret>
                                </div>
                                <div data-balloon="&#9787; #{msg.maxCharacter25} &#10;&#9787; #{msg.specialCharacter} &#10;&#9787; #{msg.minCharacter8}" data-balloon-break="data-balloon-break" data-balloon-pos="down" class="inputBox">
                                    <h:outputLabel for="pwd2" value="#{msg.checknewpassword}" />
                                    <h:inputSecret id="pwd2" requiredMessage="#{msg.checknewpasswordrequired}" maxlength="25" value="#{changePassword.checkNewPassword}" styleClass="text-input" required="true">
                                        <o:validator validatorId="javax.faces.RegularExpression" pattern="^[a-zA-Z0-9,ç,Ç,ğ,Ğ,ı,İ,ö,Ö,ş,Ş,ü,Ü]+$" message="#{msg.checknewpassword} #{msg.RegexValidator}"/>
                                        <o:validator validatorId="javax.faces.Length" minimum="8" maximum="25" message="#{msg.checknewpassword} #{msg.LongRange}" />
                                    </h:inputSecret>
                                </div>
                                <h:commandButton action="#{changePassword.changePass()}" value="#{msg.changepassword}">
                                    <f:param name="token" value="#{param['token']}"/>
                                </h:commandButton>


                            </h:form>
                        </div>
                    </p:outputPanel>
                </div>
            </div>
        </f:view>
    </h:body>
</ui:composition>
